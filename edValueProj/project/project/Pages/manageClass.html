<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <link href="../CSS/manageClass.css" rel="stylesheet" />

    <script src="../Scripts/ajaxCalls.js"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <script src="https://unpkg.com/ionicons@5.0.0/dist/ionicons.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    <script>

        var myTeams;
        var listdata;
        var taskList;
        $(document).ready(function () {
            createSList();
            createTList();
            className();
            getTasks();
            console.log("inside")
        });
        function createSList() {
            listdata = JSON.parse(localStorage["active_teacher_team"]);
            listdata1 = listdata.StudentList;
            console.log(listdata1)
            var cstr = "<ul>"
            for (a in listdata1) {
                cstr += "<li><a href='studentInClassInfo.html'><br />" + listdata1[a].Name + " " + listdata1[a].LastName + "</a></li>"

            }


            cstr += "</ul>"
            console.log(cstr)
            $("#sList").html(cstr);
        }

        function createTList() {
            myTeams = JSON.parse(localStorage["myTeams"]);
            console.log(myTeams)
            var cstr = "<ul>"
            for (a in myTeams) {
                if (myTeams[a].Title != listdata.Title)
                    cstr += "<li id=plink onclick='openTeam(this)' team_id=" + myTeams[a].Id + "><a  href='manageClass.html'>" + myTeams[a].Title + "</a></li>"

            }


            cstr += "</ul>"
            console.log(cstr)
            $("#tList").html(cstr);
        }

        function className() {

            title = listdata.Title;
            $("#title>h3").html(title);
        }
        function openTeam(val) {

            tId = val.getAttribute("team_id");
            for (team in myTeams) {
                if (myTeams[team].Id == tId) {
                    localStorage["active_teacher_team"] = JSON.stringify(myTeams[team]);
                    localStorage['quizSubject'] = myTeams[team].Subject.Name;
                    var href = $(val).children("a").attr('href');
                    location.assign(href);


                }
            }
        }
        function getTasks() {
            var getTask;
            getTask = "794491584802217252jj";
            ajaxCall("GET", "../api/Teacher/getTTasks/" + getTask, "", getTTasksSuccess, getTTasksError)
        }
        function getTTasksSuccess(data) {
            console.log(data)
            taskList = data;
            console.log(taskList)
            var cstr = "";
            for (a in taskList) {
                cstr+=`<div class="col-sm-4" id="${taskList[a]["Task"].TaskId}">

                                <div class="fr">
                                <div class="name">
                                    <p>${taskList[a]["Task"].Title}</p>
                                </div>
                                <div class="time">
                                    <p>${taskList[a].AssigmentDate}</p>
                                </div>
                            </div>

                            <div class="sr">
                                <div class="isActive">
                                    <p>${taskList[a].ForDate}</p><ion-icon name="caret-back-outline"></ion-icon>
                                </div>
                                <div class="c_time">
                                    <span>${taskList[a].TillDate}  </span><ion-icon name="pencil-outline"></ion-icon>
                                </div>
                            </div>
                            <div class="tr">
                                <div class="notification">
                                    <p>15</p>
                                </div>
                                <div class="cancel">
                                    <ion-icon name="close-circle-outline" size="large"></ion-icon>
                                </div>
                            </div>


                        </div>`
            }
            $("#tasks").html(cstr);
        }
        function getTTasksError(ex) {
            console.log(ex)

        }
        function addRemoveS() {
            localStorage["TeamMode"] = "edit";
            location.assign('addStudentToClass.html')
        }

        function addQuiz() {
            location.assign("Assignment_assignment.html")
        }

        function myFunction(x) {
            if (x.classList.contains("change")) {

            }
            x.classList.toggle("change");
            $("#teamList").toggle();

        }




        var options = {
            responsive: true,
            maintainAspectRatio: true,
            legend: {

            },
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true
                    }
                }]
            },
            legend: {
                labels: {
                    // This more specific font property overrides the global property
                    fontColor: 'black',
                    fontSize: 20
                },
            },
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true,
                        fontColor: 'black',
                        fontSize: 25
                    },
                }],
                xAxes: [{
                    ticks: {
                        fontColor: 'black',
                        fontSize: 25
                    },
                }]
            },

        };
        var chart1;
        var chart2;
        var chart3;
        var chart4;



        function ChartOne() {

            var ctx = document.getElementById('chart1').getContext('2d');

            chart1 = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['label1', 'label2', 'label3', 'label4', 'label5'],
                    datasets: [
                        {
                            label: 'Bible',
                            data: [12, 7, 22, 17, 10],
                            backgroundColor: 'rgb(0,123,254)',
                            borderColor: 'rgb(0,123,254)',
                            borderWidth: 1
                        },
                    ]
                },
                options: options,

                animation: {
                    animateScale: true,
                    animateRotate: true
                }
            });

        }
        function ChartTwo() {

            var ctx = document.getElementById('chart2').getContext('2d');

            chart2 = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['label1', 'label2', 'label3', 'label4', 'label5'],
                    datasets: [
                        {
                            label: 'Bible',
                            data: [14, 2, 15, 20, 6],
                            backgroundColor: 'rgba(222, 222, 132, 1)',
                            borderColor: 'rgba(222, 222, 132, 2)',
                            borderWidth: 1
                        },
                    ]
                },
                options: options,

                animation: {
                    animateScale: true,
                    animateRotate: true
                }
            });

        }
        function ChartThree() {

            var ctx = document.getElementById('chart3').getContext('2d');

            chart3 = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['label1', 'label2', 'label3', 'label4', 'label5'],
                    datasets: [
                        {
                            label: 'History',
                            data: [12, 7, 22, 17, 10],
                            backgroundColor: 'rgba(255, 99, 132, 1)',
                            borderColor: 'rgba(255, 99, 132, 2)',
                            borderWidth: 1
                        },
                    ]
                },
                options: options,
                animation: {
                    animateScale: true,
                    animateRotate: true
                }
            });

        }
        function ChartFour() {

            var ctx = document.getElementById('chart4').getContext('2d');

            chart4 = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['label1', 'label2', 'label3', 'label4', 'label5'],
                    datasets: [
                        {
                            label: 'History',
                            data: [44, 55, 32, 14, 22],
                            backgroundColor: 'rgba(200, 150, 132, 1)',
                            borderColor: 'rgba(200, 150, 132, 2)',
                            borderWidth: 1
                        },
                    ]
                },
                options: options,

                animation: {
                    animateScale: true,
                    animateRotate: true
                }
            });

        }
        function UpdateTaskDoughnut() {
            var ctx2 = document.getElementById('chart3').getContext('2d');

            task = new Chart(ctx2, {
                type: 'doughnut',
                data: {
                    labels: ['הוגש', 'לא הוגש'],
                    datasets: [
                        {

                            data: [2, 3],
                            backgroundColor: ['rgba(152,251,152)', 'rgba(135,206,250)'],

                        },

                    ]
                },
                options: {
                    responsive: true,
                    legend: {
                        position: 'top',
                        labels: {
                            // This more specific font property overrides the global property
                            fontColor: 'black',
                            fontSize: 15
                        },
                    },

                    animation: {
                        animateScale: true,
                        animateRotate: true
                    }
                }
            });
        }

        function ChartChange() {
            $("#statistics").height("400px")
            var x = document.getElementById("mySelect").value;
            var FirstCharts = document.getElementById("FirstCharts");
            var SecondCharts = document.getElementById("SecondCharts");
            var ThirdCharts = document.getElementById("ThirdCharts");
            if (x == "FirstCharts") {
                FirstCharts.style.display = "block";
                SecondCharts.style.display = "none";
                ThirdCharts.style.display = "none";
                ChartOne();
            }
            else if (x == "SecondCharts") {
                FirstCharts.style.display = "none";
                SecondCharts.style.display = "block";
                ThirdCharts.style.display = "none";
                UpdateTaskDoughnut();
            }
            else if (x == "ThirdCharts") {
                FirstCharts.style.display = "none";
                SecondCharts.style.display = "none";
                ThirdCharts.style.display = "block";
                ChartTwo();
                ChartFour();
            }
            else {
                $("#statistics").height("0")
                FirstCharts.style.display = "none";
                SecondCharts.style.display = "none";
                ThirdCharts.style.display = "none";

            }

        }


    </script>
</head>
<body  dir="rtl">
    <div id="container">
        <div id="header">
            <div class="row">

                <div id="imgLogo" class="col-lg-3">

                    <img src="../images/EDvalueSmall.png" />

                </div>

                <div id="title" class="col-lg-6">
                    <h3>שם הקבוצה...</h3>

                </div>

                <div id="mindcetImg" class="col-lg-3 d-none d-lg-block">

                    <!--<img src="../images/MindCet.png" />-->

                </div>

            </div>

            <nav class="navbar navbar-expand-lg navbar-light navBar">

                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav navPadding">
                        <li class="nav-item active">
                            <button class="btn btn-primary btnonSmall" onclick="addRemoveS()">ניהול קבוצה</button>
                        </li>
                        <li class="nav-item active">
                            <button class="btn btn-primary btnonSmall" onclick="addQuiz()">הוסף מטלה</button>
                        </li>
                        <li class="nav-item active">
                            <button class="btn btn-primary btnonSmall" onclick="">הכיתה שלי</button>
                        </li>

                        <li class="nav-item dropdown">
                            <select class="btn btn-primary btnonSmall" id="mySelect" onchange="ChartChange()">
                                <option value="" disabled selected hidden>בחר אפשרות</option>
                                <option value="FirstCharts">גרף 1</option>
                                <option value="SecondCharts">גרף 2</option>
                                <option value="ThirdCharts">גרף 3</option>
                                <option value="CloseAll">לסגור הכל</option>
                            </select>
                        </li>
                        <li class="nav-item dropdown">
                            <select class="btn btn-primary btnonSmall" id="Smenue">
                                <option value="" disabled selected hidden>סנן לפי כיתה</option>
                                <option href="#statistics" value="statistics">סטטיסטיקה</option>
                                <option href="#kidsList" value="kidsList">רשימת תלמידים</option>
                                <option href="#quiz" value="quiz">משימות</option>
                            </select>
                        </li>
                    </ul>
                    <form class="form-inline my-2 my-lg-0 mr-auto">
                        <input class="myForm mr-sm-2" type="search" placeholder="חפש תלמיד/מורה" aria-label="Search">
                        <button class="btn btn-primary my-2 my-sm-0" type="submit">Search</button>
                    </form>
                </div>
            </nav>





            <!--<div class="dropdown" id="Smenue">
                <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                    סנן לפי כיתה
                </button>

                <div class="dropdown-menu">

                    <a class="dropdown-item" href="#statistics">סטטיסטיקה</a>
                    <a class="dropdown-item" href="#kidsList">רשימת תלמידים</a>
                    <a class="dropdown-item" href="#quiz">משימות</a>



                </div>

            </div>-->

        </div>

        <!-- <div id="Tcontroll">
             <div id="TControlBtns">

                     <button class="btn btn-primary" onclick="addRemoveS()">ניהול קבוצה</button>
                     <button class="btn btn-primary" onclick="addQuiz()">הוסף מטלה</button>
                     <button class="btn btn-primary" onclick="">הכיתה שלי</button>
                     <select class="btn btn-primary" id="mySelect" onchange="ChartChange()">
                         <option value="" disabled selected hidden>בחר אפשרות</option>
                         <option value="FirstCharts">גרף 1</option>
                         <option value="SecondCharts">גרף 2</option>
                         <option value="ThirdCharts">גרף 3</option>
                         <option value="CloseAll">לסגור הכל</option>
                     </select>



             </div>

             <div class="searchDiv">
                 <div class="justify-content-center ">
                     <div class="searchbar">
                         <input class="search_input" type="text" name="" placeholder="חיפוש תלמיד">
                         <a href="#" class="search_icon"><i class="fas fa-search"></i></a>
                     </div>
                 </div>
             </div>

         </div>-->

        <div class="row" id="main">
            <div class="hide_list_teams change " onclick="myFunction(this)">
                <div class="bar1"></div>
                <div class="bar2"></div>
                <div class="bar3"></div>
            </div>
            <div id="teamList" class="col-sm-2">

                <div id="slTitle">
                    <h4>הקבוצות שלי</h4>
                </div>
                <div dir="ltr" id="tList">
                    <ul>

                        <li><a href="manageClass.html">קבוצה של מורה</a></li>
                        <li><a href="manageClass.html">קבוצה של מורה</a></li>
                        <li><a href="manageClass.html">קבוצה של מורה</a></li>
                        <li><a href="manageClass.html">קבוצה של מורה</a></li>
                        <li><a href="manageClass.html">קבוצה של מורה</a></li>
                        <li><a href="manageClass.html">קבוצה של מורה</a></li>
                        <li><a href="manageClass.html">קבוצה של מורה</a></li>
                        <li><a href="manageClass.html">קבוצה של מורה</a></li>


                    </ul>
                </div>



            </div>

            <div id="info" class="col">
                <div id="statistics">
                    <div class="content">
                        <div class="row" id="FirstCharts" style="display:none">
                            <div class="wrapper col-12"><canvas id="chart1"></canvas></div>

                        </div>
                        <div class="row" id="SecondCharts" style="display:none">
                            <div class="wrapper col-12"><canvas id="chart3"></canvas></div>


                        </div>
                        <div class="row" id="ThirdCharts" style="display:none">
                            <div class=" col-lg-6" style="float:left"><canvas id="chart2"></canvas></div>
                            <div class=" col-lg-6" style="float:left"><canvas id="chart4"></canvas></div>

                        </div>
                        <table id="ThirdCharts" width="100%" style="display:none">
                            <tr width="100%">
                                <td width="50%">
                                    <canvas id="chart2"></canvas>
                                </td>

                            </tr>
                        </table>
                    </div>

                </div>

                <div id="class_info" >


                    <div class="row" id="tasks">
                        <div class="col-sm-4" id="task">

                            <div class="fr">
                                <div class="name">
                                    <p>שם משימה....</p>
                                </div>
                                <div class="time">
                                    <p>22/22/2222</p>
                                </div>
                            </div>

                            <div class="sr">
                                <div class="isActive">
                                    <p>לתאריך:22.22.2222</p><ion-icon name="caret-back-outline"></ion-icon>
                                </div>
                                <div class="c_time">
                                    <span>שנה  </span><ion-icon name="pencil-outline"></ion-icon>
                                </div>
                            </div>
                            <div class="tr">
                                <div class="notification">
                                    <p>15</p>
                                </div>
                                <div class="cancel">
                                    <ion-icon name="close-circle-outline" size="large"></ion-icon>
                                </div>
                            </div>


                        </div>
                        <div class="col-sm-4" id="task">

                            <div class="fr">
                                <div class="name">
                                    <p>שם משימה....</p>
                                </div>
                                <div class="time">
                                    <p>22/22/2222</p>
                                </div>
                            </div>

                            <div class="sr">
                                <div class="isActive">
                                    <p>לתאריך:22.22.2222</p><ion-icon name="caret-back-outline"></ion-icon>
                                </div>
                                <div class="c_time">
                                    <span>שנה  </span><ion-icon name="pencil-outline"></ion-icon>
                                </div>
                            </div>
                            <div class="tr">
                                <div class="notification">
                                    <p>15</p>
                                </div>
                                <div class="cancel">
                                    <ion-icon name="close-circle-outline" size="large"></ion-icon>
                                </div>
                            </div>


                        </div>
                        <div class="col-sm-4" id="task">

                            <div class="fr">
                                <div class="name">
                                    <p>שם משימה....</p>
                                </div>
                                <div class="time">
                                    <p>22/22/2222</p>
                                </div>
                            </div>

                            <div class="sr">
                                <div class="isActive">
                                    <p>לתאריך:22.22.2222</p><ion-icon name="caret-back-outline"></ion-icon>
                                </div>
                                <div class="c_time">
                                    <span>שנה  </span><ion-icon name="pencil-outline"></ion-icon>
                                </div>
                            </div>
                            <div class="tr">
                                <div class="notification">
                                    <p>15</p>
                                </div>
                                <div class="cancel">
                                    <ion-icon name="close-circle-outline" size="large"></ion-icon>
                                </div>
                            </div>


                        </div>
                        <div class="col-sm-4" id="task">

                            <div class="fr">
                                <div class="name">
                                    <p>שם משימה....</p>
                                </div>
                                <div class="time">
                                    <p>22/22/2222</p>
                                </div>
                            </div>

                            <div class="sr">
                                <div class="isActive">
                                    <p>לתאריך:22.22.2222</p><ion-icon name="caret-back-outline"></ion-icon>
                                </div>
                                <div class="c_time">
                                    <span>שנה  </span><ion-icon name="pencil-outline"></ion-icon>
                                </div>
                            </div>
                            <div class="tr">
                                <div class="notification">
                                    <p>15</p>
                                </div>
                                <div class="cancel">
                                    <ion-icon name="close-circle-outline" size="large"></ion-icon>
                                </div>
                            </div>


                        </div>
                        <div class="col-sm-4" id="task">

                            <div class="fr">
                                <div class="name">
                                    <p>שם משימה....</p>
                                </div>
                                <div class="time">
                                    <p>22/22/2222</p>
                                </div>
                            </div>

                            <div class="sr">
                                <div class="isActive">
                                    <p>לתאריך:22.22.2222</p><ion-icon name="caret-back-outline"></ion-icon>
                                </div>
                                <div class="c_time">
                                    <span>שנה  </span><ion-icon name="pencil-outline"></ion-icon>
                                </div>
                            </div>
                            <div class="tr">
                                <div class="notification">
                                    <p>15</p>
                                </div>
                                <div class="cancel">
                                    <ion-icon name="close-circle-outline" size="large"></ion-icon>
                                </div>
                            </div>


                        </div>




                    </div>

                </div>





            </div>


            <div id="quiz" class="col-lg-2 d-none d-lg-block" ">
                
                <div id="slTitle">
                    <h4>תלמידים</h4>
                     </div>
                <div id="sList">



                    <ul>
                        <li><a href="studentInClassInfo.html"> 305779449  <br />שם תלמיד</a></li>
                        <li><a href="studentInClassInfo.html"> 305779449  <br />שם תלמיד</a></li>
                        <li><a href="studentInClassInfo.html"> 305779449  <br />שם תלמיד</a></li>
                        <li><a href="studentInClassInfo.html"> 305779449  <br />שם תלמיד</a></li>
                        <li><a href="studentInClassInfo.html"> 305779449  <br />שם תלמיד</a></li>
                        <li><a href="studentInClassInfo.html"> 305779449  <br />שם תלמיד</a></li>
                        <li><a href="studentInClassInfo.html"> 305779449  <br />שם תלמיד</a></li>
                        <li><a href="studentInClassInfo.html"> 305779449  <br />שם תלמיד</a></li>
                        <li><a href="studentInClassInfo.html"> 305779449  <br />שם תלמיד</a></li>


                    </ul>

                </div>

            </div>
        </div>

    </div>

</body>
</html>